# Исправление расчёта для площадей >80 м²

## Проблема
Для площадей больше 80 м² возникала ошибка при расчёте цены, хотя в админке была указана цена за каждые +10 м².

## Исправления

### 1. Улучшена логика поиска цены за шаг
В `calculator/services.py` (строки 114-123):
- Добавлен поиск цены за шаг по различным вариантам названия ("+10", "+ 10", "10 м", "за 10", "10м")
- Улучшена логика поиска цены с `area_from >= 80` и `area_to is None`

### 2. Исправлен расчёт шагов
В `calculator/services.py` (строки 183-195):
- Для площадей >80 м² правильно считается количество шагов по 10 м²
- 81-90 м² = 1 шаг
- 91-100 м² = 2 шага
- 101-110 м² = 3 шага
- И так далее

### 3. Улучшена обработка старой цены
В `calculator/views.py` (строки 165-190):
- Для площадей >80 м² старая цена не применяется (т.к. используется формула с шагами)

## Результаты тестирования

```
80 m2 -> 2520.00 Kc [OK]
81 m2 -> 2740.00 Kc [OK] (2520 + 1 × 220)
90 m2 -> 2740.00 Kc [OK] (2520 + 1 × 220)
91 m2 -> 2960.00 Kc [OK] (2520 + 2 × 220)
100 m2 -> 2960.00 Kc [OK] (2520 + 2 × 220)
150 m2 -> 4060.00 Kc [OK] (2520 + 7 × 220)
```

## Настройка в админке

Для правильной работы нужно создать цену в админке:
- **Level**: general (или другой уровень)
- **Area from**: 81 (или больше 80)
- **Area to**: оставить пустым (None)
- **Price**: цена за каждые +10 м² (например, 220.00)

Или можно указать в названии "+10" или "10 м", тогда система найдёт эту цену автоматически.

## Статус: ✅ ИСПРАВЛЕНО

